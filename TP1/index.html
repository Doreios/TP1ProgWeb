<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>TP1 WEB</title>
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <script>
      /*eslint-env jquery */
      function checkPassword(){
        var passwd = $("#password").val();
        var retour = "Votre mot de passe ne remplit pas les conditions suivantes: \n";
        var mdpInvalide = false;
        var minRegex = new RegExp('(?=.*[a-z])');
        var majRegex = new RegExp('(?=.*[A-Z])');
        var numRegex = new RegExp('(?=.*[0-9])');
        var speRegex = new RegExp('(?=.*[^ \w])');
        
        if(passwd.length<8){
          mdpInvalide = true;
          retour += "Contenir au moins 8 caractères \n";
        }

        if(!minRegex.test(passwd)){
          mdpInvalide = true;
          retour += "Contenir au moins une minuscule \n";
        }

        if(!majRegex.test(passwd)){
          mdpInvalide = true;
          retour += "Contenir au moins une majuscule \n";
        }

        if(!numRegex.test(passwd)){
          mdpInvalide = true;
          retour += "Contenir au moins un chiffre \n";
        }

        if(!speRegex.test(passwd)){
          mdpInvalide = true;
          retour += "Contenir au moins un caractère spécial \n";
        }

        if(mdpInvalide){
          alert(retour);
        }else{
          alert("Votre mot de passe est conforme");
        }
      }
    </script>

</head>
<body>
    <h1>Formulaire</h1>
    <form method="post" onsubmit="checkPassword()">
        <p>
            <label for="nom">Nom :</label><br />
            <input type="text" class="form-control" name="nom" id="nom" pattern="[a-zA-ZáàâäãåçéèêëíìîïñóòôöõúùûüýÿæœÁÀÂÄÃÅÇÉÈÊËÍÌÎÏÑÓÒÔÖÕÚÙÛÜÝŸÆŒ._\s-]{1,}" 
            title="Votre nom ne doit contenir que des lettres et au moins un caractère"/>
       
            <br />
            <label for="prenom">Prénom :</label><br />
            <input type="text" class="form-control" name="prenom" id="prenom" pattern="[a-zA-ZáàâäãåçéèêëíìîïñóòôöõúùûüýÿæœÁÀÂÄÃÅÇÉÈÊËÍÌÎÏÑÓÒÔÖÕÚÙÛÜÝŸÆŒ._\s-]{1,}" 
            title="Votre prénom ne doit contenir que des lettres et au moins un caractère"/>
       
            <br />
            <label for="adresse">Adresse :</label><br />
            <input type="text" class="form-control" name="adresse" id="adresse" pattern="[a-zA-Z0-9áàâäãåçéèêëíìîïñóòôöõúùûüýÿæœÁÀÂÄÃÅÇÉÈÊËÍÌÎÏÑÓÒÔÖÕÚÙÛÜÝŸÆŒ,._\s-]{1,}" 
            title="Votre adresse ne doit contenir que des chiffres et lettres et au moins un caractère"/>
       
            <br />
            <label for="ville">Ville :</label><br />
            <input type="text" class="form-control" name="ville" id="ville" pattern="[a-zA-ZáàâäãåçéèêëíìîïñóòôöõúùûüýÿæœÁÀÂÄÃÅÇÉÈÊËÍÌÎÏÑÓÒÔÖÕÚÙÛÜÝŸÆŒ._\s-]{1,}" 
            title="Votre ville ne doit contenir que des lettres et au moins un caractère"/>
       
            <br />
            <label for="cp">Code postal :</label><br />
            <input type="text" class="form-control" name="cp" id="cp" pattern="[0-9]{4,5}"  
            title="Votre code postal ne doit contenir que des chiffres et faire 4 ou 5 caractères"/>
            
            <br />
            <label for="tel">Téléphone :</label><br />
            <input type="text" class="form-control" name="tel" id="tel" pattern = "[0-9]{10}" 
            title="Votre numéro de téléphone ne doit contenir que des chiffres et faire 10 caractères"/>
       
            <br />
            <label for="email">Email :</label><br />
            <input type="text" class="form-control" name="email" id="email" pattern = "^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$" 
            title="Votre adresse mail doit être au bon format"/>
       
            <br />
            <label for="civilite">Civilité</label><br />
            <select name="civilite" id="civilite">
               <option value="masculin">Masculin</option>
               <option value="feminin">Feminin</option>
               <option value="autre">Autre</option>
            </select>
       
            <br />
            <label for="password">Mot de passe :</label><br />
            <input type="password" class="form-control" name="password" id="password" />
       
            <br />
            <label for="login">Identifiant :</label><br />
            <input type="text" class="form-control" name="login" id="login" />
            
            <br />
            <button  type ="submit" class="btn btn-primary">Envoi</button>
        </p>
    </form>
</body>
</html>